<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!-- Font Awesome Cdn-->
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />

    <!-- Bootstrap CSS -->
<!--    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" />
    <!-- Owl carousel -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.1.3/assets/owl.carousel.min.css" />
    <link rel="stylesheet" href="files/css/owl.carousel.min.css" />
    <link rel="stylesheet" href="files/css/owl.theme.default.min.css" />
    <link rel="stylesheet" href="files/css/style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/emojionearea/3.4.2/emojionearea.min.css" integrity="sha512-vEia6TQGr3FqC6h55/NdU3QSM5XR6HSl5fW71QTKrgeER98LIMGwymBVM867C1XHIkYD9nMTfWK2A0xcodKHNA==" crossorigin="anonymous" />
    <title>BotaFoga Messenger</title>
</head>
<body>
<!-- Desktop View Messenger Start -->
<div class="container-fluid custom-container desktop-tablet-view">
    <div class="row">
        <div class="col-xl-3 col-lg-4 col-md-5 pr-0">
            <div class="chat-wrapper">
                <div class="row" style="align-items: center; display: flex;">
                    <div class="col-6">
                        <div class="messenger-share text-left" width="100%">
                            <a href="#"  onclick="$('#main_user_search').val(''); showUserList();">
                                <i class="fas fa-comment-alt-lines"></i>
                            </a>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="messenger-share text-right" width="100%">
                            <a href="#" data-toggle="modal" data-target="#groupmodal" onclick="showUserListForGroup();">
                                <i class="fal fa-users"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="row" style="align-items: center; display: flex;">  <div class="col-12" id="loginusername"></div> </div>
                <div class="messenger-search">
                    <form action="">
                        <div class="form-group has-search">
                            <span class="fa fa-search form-control-feedback"></span>
                            <input type="text" class="form-control" placeholder="Search Messages" id="main_user_search" onkeyup="showUserList();"/>
                        </div>
                    </form>
                </div>

            </div>
            <div class="spinner-wrapper">
                <div class="spinner-border user-list-loader d-none"></div>
            </div>
            <div class="chat-list" id="users">

            </div>
        </div>
        <div class="col-xl-9 col-lg-8 col-md-7" id="message-box" style="background-color: rgb(243 243 243);">
            <div id="chat-div" class="row chat-box">
                <div class="col-12 user-top">
                    <div class="user-top-details">
                        <div class="row message-grid show-chat-area d-none">
                            <div class="avatar-image chat-details">
                                <img src="files/images/avatar.jpg" alt=""  id="room_avatar"/>
                                <span><i class="fas fa-circle" id="status_circle"></i></span>
                            </div>
                            <div class="user-chat">
                                <h5 id="room-name"></h5>
                                <span id="room_status"></span>
                                <span id="last_seen"></span>

                            </div>
                            <div class="time-message text-right">
                                <a href="">
                                    <i class="fa fa-video"></i>
                                </a>
                                <a href="">
                                    <i class="fas fa-phone" style="font-size: 20px;"></i>
                                </a>

                                <a>
                                    <i id="click-button" class="fad fa-info-circle"></i>
                                </a>
                                <a href="">
                                    <i class="fal fa-ellipsis-v"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 no-message-found">
                    <div class="message-body">
                    no message found ,please select any channel first
                    </div>
                </div>
                <div class="col-12">
                    <div class="spinner-wrapper chat-messages-spinner">
                        <div class="spinner-border chat-messages-loader d-none"></div>
                    </div>
                    <div class="message-body chat-messages">

                    </div>
                </div>

                <div class="col-12" >
                    <div class="row audio-message-box" id="voice-message-recording-bar" style="display: none">
                        <div class="col-1 col-lg-1 col-md-2 col-xl-1 text-center">
                            <a href="#" id="btn-cancel-recording">
                                <i class="fal fa-times"></i>
                            </a>
                        </div>
                        <div class="col-10  col-lg-9 col-md-7 col-xl-9 p-0">
                            <div class="progress" style="height: 10px;">
                                <div class="progress-bar" id="voice-recording-progress-bar" role="progressbar" style="width: 1%;" aria-valuenow="1" aria-valuemin="0" aria-valuemax="120"></div>
                            </div>
                        </div>
                        <div class="col-1  col-lg-2 col-md-3 col-xl-2 text-center d-flex justify-content-between">
                            <span id="recording-countdown"></span>
                            <a href="#" id="btn-stop-recording">
                                <img src="files/images/send-icon.png" alt="">
                            </a>
                        </div>
                    </div>
                    <div class="type-message-box show-chat-area d-none" id="type-message-box">
                        <form id="plus-icon-form">
                            <input type="file"  id="plus-icon-file" multiple  style="display: none;" />
                        </form>
                        <a href="" class="plus-icon upload-file-icon" >
                            <i class="fas fa-plus-circle"></i>
                        </a>
                       <!-- <a href="" data-toggle="modal" data-target="#imagemodal">-->
                        <a href="#" data-toggle="modal" data-backdrop="static" data-keyboard="false" data-target="#imagemodal"  id="btn-start-video-streaming">
                            <i class="fas fa-camera"></i>
                        </a>
                        <a href="" class="upload-file-icon">
                            <i class="fas fa-image"></i>
                        </a>
                       <a href=""><i class="fal fa-microphone" id="btn-start-recording" ></i></a>
                        <a href="" class="gif-icon" data-toggle="modal" data-target="#gifmodal">
                            <i class="fas fa-gifts"></i>
                        </a>
                        <!--<i class="fal fa-microphone"></i>-->
                        <!--<i class="fa fa-paper-plane d-none" id="btn-stop-recording"></i>-->
                        <div class="message-form-width">
                            <form action="" id="chat-form" enctype="multipart/form-data">
                                <div class="position-relative">
                                    <div class="input-emoji-msg">
                                        <a href="" >
                                            <i class="far fa-smile"></i>
                                        </a>
                                    </div>
                                    <!--<input type="text" id="msg" placeholder="type your message here...." />-->
                                    <textarea type="text" id="msg" placeholder="type your message here...." /></textarea>

                                </div>
                                <div class="span6">
                                    <div id="standalone"></div>
                                </div>
                            </form>
                        </div>
                        <a href="" class="cancel-edit d-none" id="cancel-edit" onclick="clearEditMessage(event);">
                            <i class="far fa-times-circle"></i>
                        </a>
                        <a href="" class="thumbs-up" id="thumbs-up">
                            <i class="fas fa-thumbs-up"></i>
                        </a>

                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-lg-3 col-md-5 d-none" id="detail-box">
            <div class="details-wrapper">
                <div class="details-avatar">
                    <img src="files/images/avatar.jpg" alt="" />
                </div>
                <div class="details-title text-center">
                    <h5>Marques Brownlee</h5>
                    <span>
                                Active 21 hours ago
                            </span>
                </div>
                <div class="border-bottom"></div>
                <div class="support-messenger">
                    <h6><a href="#" onclick="return showOrHide('menulink');">Customise Chat</a></h6>
                    <ul id="menulink" class="list-unstyled">
                        <li><i class="fas fa-dot-circle mr-2"></i><a href="">Change Theme</a></li>
                        <li><i class="far fa-smile mr-2"></i><a href="">Change Emoji</a></li>
                        <li><i class="fas fa-pencil-alt mr-2"></i><a href="">Edit Emoji</a></li>
                    </ul>
                    <h6><a href="#" onclick="return showOrHide('menulink1');">Privacy & Support</a></h6>
                    <ul id="menulink1" class="list-unstyled">
                        <li><i class="fas fa-volume-mute mr-2"></i><a href="">Mute Chat</a></li>
                        <li><i class="fal fa-comment-alt-times mr-2"></i><a href="">Ignore Messages</a></li>
                        <li><i class="far fa-ban mr-2"></i><a href="">Block User</a></li>
                        <li><i class="fas fa-flag mr-2"></i><a href="">Report</a></li>
                    </ul>
                </div>
                <div class="border-bottom"></div>
            </div>
        </div>
    </div>
</div>

<!-- Desktop View Messenger End -->
<!-- Start Modal -->
<!-- The Image Modal -->
<div id="ImagePopModal" class="modalimage d-none">
    <div class="image-action">
        <a href="#" download id="ImagePopModalLink"><i class="fal fa-arrow-to-bottom"></i></a>
        <span class="closeimage"><i class="fal fa-times"></i></span>
    </div>
    <img class="modal-content" id="popup_image">
</div>
  <!-- Group Modal -->
  <div class="modal fade" id="groupmodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
          <form method="post" action="" enctype="multipart/form-data" id="groupform">
        <div class="carousel-wrap">
            <div class="owl-carousel">
              <div class="item">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLongTitle">New Group Chat</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                        <div class="add-image-modal">
                           <a href=""><i class="fas fa-camera" id="group_picture_icon"></i>
                            
                           </a>
                            <input type="file" style="display: none"  name="group_picture_file" id="group_picture_file"  onchange="convert_base64(event);">
                            <input type="hidden" name="g_avatar" id="g_avatar">
                        </div>
                        <div class="input-image-modal">
                            <form>
                                <div class="form-group">
                                  <input type="text" class="form-control" id="groupname" aria-describedby="emailHelp" placeholder="Group Name">
                                </div>
                            </form>
                        </div>
                    </div>
              </div>
              <div class="item">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Create Group Chat</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <div class="messenger-search">
                        <form action="">
                            <div class="form-group has-search">
                                <span class="fa fa-search form-control-feedback" aria-hidden="true"></span>
                                <input type="text" class="form-control" id="main_user_search_group" placeholder="Search people" onkeyup="showUserListForGroup();">
                            </div>
                        </form>
                    </div>
                    <div class="selected-people" id="selected-people">

                    </div>
                    <h6>Suggestions</h6>
                     <div style="text-align: center;cursor:pointer;"> <i class="fas fa-long-arrow-alt-left d-none" id="group-slide-back"></i></div>
                    <div class="suggestion-list" id="suggestion-list">



                    </div>

              </div>
            </div>
          </div>
            <div class="row">



                <div class="col text-center " style="padding-bottom: 5px;">
                    <button type="button" class="btn btn-info d-none" name="createGroupButton" id="createGroupButton" onclick="CreateNewGroup()">Done</button>
                </div>
            </div>
         </form>
      </div>
    </div>
  </div>
  </div>
  <!-- Modal -->
  <div class="modal fade" id="imagemodal" tabindex="-1" role="dialog" aria-labelledby="imagemodalTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-body">
            <video id="stream" width="320" height="240"></video>
            <canvas id="capture" width="320" height="240"></canvas>
            <div id="snapshot"></div>
        </div>
        <div class="modal-footer">
         <i class="fas fa-home" data-dismiss="modal" id="btn-stop-video-streaming"></i>
         <i class="fad fa-camera"  id="btn-capture-image"></i>

            <i class="fa fa-paper-plane" aria-hidden="true" data-dismiss="modal" id="btn-send-capture-image" style="display: none"></i>
        </div>
      </div>
    </div>
  </div>
<!-- Gif Modal -->
<div class="modal " id="gifmodal" tabindex="-1" role="dialog" aria-labelledby="imagemodalTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content" id="gipfy-content">
            <div class="git-image-search-wrapper">
                <div class="gif-search-input-wrapper">
                    <input type="text" class="form-control gif-search-input" placeholder="Search GIPHY" >
                    <span>
                    <i class="far fa-search"></i>
                </span>
                </div>
                <div class="gif-search-button">
                    <button type="button" class="btn-info" id="start_giphy_search" >Search</button>
                </div>
            </div>
            <div class="row m-0 gif-gallery-wrapper" id="gif-gallery-wrapper">

            </div>

        </div>
    </div>
</div>
<script>
    function showOrHide(zap) {
        if (document.getElementById) {
            var abra = document.getElementById(zap).style;
            if (abra.display == "block") {
                abra.display = "none";
            } else {
                abra.display = "block";
            }
            return false;
        } else {
            return true;
        }
    }
</script>
<script>
    function showOrHide(zap) {
        if (document.getElementById) {
            var abra = document.getElementById(zap).style;
            if (abra.display == "block") {
                abra.display = "none";
            } else {
                abra.display = "block";
            }
            return false;
        } else {
            return true;
        }
    }

</script>




<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.1.3/owl.carousel.min.js"></script>
<script src="https://use.fontawesome.com/826a7e3dce.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qs/6.9.2/qs.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.0/socket.io.js"></script>-->
<script src="https://cdn.jsdelivr.net/npm/socket.io-file-client@2.0.2/socket.io-file-client.js"></script>


<script src="https://www.gstatic.com/firebasejs/8.8.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.8.0/firebase-messaging.js"></script>
<script src="js/main.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/RecordRTC/5.6.2/RecordRTC.js" integrity="sha512-ct9A+Fsq37O/MmhMrl0o5R8WoS0V1YS2fW69RGnpa4lIQvUhMOA3xbGQ8oy4UK6CeWb8JPu4QippagGlVu1c+A==" crossorigin="anonymous"></script>
<script src="js/extra.js"></script>
<script src="js/group.js"></script>
<script src="js/capture.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/emojionearea/3.4.2/emojionearea.min.js" integrity="sha512-hkvXFLlESjeYENO4CNi69z3A1puvONQV5Uh+G4TUDayZxSLyic5Kba9hhuiNLbHqdnKNMk2PxXKm0v7KDnWkYA==" crossorigin="anonymous"></script>
<script src="https://cdn.rawgit.com/github/fetch/master/fetch.js"></script>
<!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->

<script type="text/javascript">

</script>
<script>

    var owl;
    $(document).ready(function(){
        owl= $(".owl-carousel").owlCarousel({
        loop: true,
        margin: 10,
        nav: true,
        // navText: ["<i class='fa fa-chevron-right'></i>", "<i class='fa fa-chevron-right'></i>"],
         navText: ["<i class='fal fa-long-arrow-left'></i>", "<i class='fal fa-long-arrow-right'></i>"],
        autoplay: false,
        loop: false,
        dragabel:false,
        responsive: {
            300: {
                items: 1,
            },
            500: {
                items: 1,
            },
            600: {
                items: 1,
            },
            1000: {
                items: 1,
            },
        },
    });
        owl.on('changed.owl.carousel', function(e) {
            if(e.item.index==1){
                console.log("test"+ e.item.index);
                $("#createGroupButton").removeClass('d-none');
                $(".owl-next").addClass('d-none');
                $("#group-slide-back").removeClass('d-none');
            }else{
                $("#createGroupButton").addClass('d-none');
                $(".owl-next").removeClass('d-none');
                $("#group-slide-back").addClass('d-none');
            }

        });

        $('#group-slide-back').click(function(){
            owl.trigger('to.owl.carousel', 0)
        });
    });
</script>
<script>
    $("#click-button").click(function (e){
        e.preventDefault();
        if($("#message-box").hasClass("col-xl-9")){
            $("#message-box").removeClass("col-xl-9");
            $("#message-box").addClass("col-xl-6");
            $("#detail-box").removeClass("d-none");
        }else{
            $("#message-box").removeClass("col-xl-6");
            $("#message-box").addClass("col-xl-9");
            $("#detail-box").addClass("d-none");

        }



    });
</script>
<script>
    function openAction(id) {
    document.getElementById("myDropdown_"+id).classList.toggle("show");
  }
  window.onclick = function(event) {
    if (!event.target.matches('.dropbtn')) {
      var dropdowns = document.getElementsByClassName("dropdown-content");
      var i;
      for (i = 0; i < dropdowns.length; i++) {
        var openDropdown = dropdowns[i];
        if (openDropdown.classList.contains('show')) {
          openDropdown.classList.remove('show');
        }
      }
    }
  }

$("#group_picture_icon").click(function (e){
    $("#group_picture_file").trigger("click");
    e.preventDefault();
});



    function convert_base64(event){
        let base64String = "";
        var file = document.querySelector('#group_picture_file')['files'][0];
        var reader = new FileReader();
        reader.onload = function (e) {
            $('#blah').attr('src', e.target.result);
            base64String = reader.result;
            imageBase64Stringsep = base64String;
            $("#g_avatar").val(base64String);
        }
        reader.readAsDataURL(file);

    }
</script>

</body>
</html>
